<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta author="ninjas.cl">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <title>Avatar Spirits Tool</title>
    <link href="https://fonts.googleapis.com/css?family=Press+Start+2P" rel="stylesheet">

    <style>
        html, body {
            background-color: #33333c;
        }

        body {
            background: linear-gradient(
            rgba(0, 0, 0, 0.7), 
            rgba(0, 0, 0, 0.7)
            ), url(assets/images/avatars.webp) repeat;
        }

        html, body, p, select, option, strong, a, h1, h2, h3, h4, h5, h6, title, button {
            color:#ffffff;
            font-family: 'Press Start 2P', cursive;
        }

        button.purple {
            background-color: mediumslateblue;
            padding: 10px;
            border-color: mediumpurple;
        }

        header {
            padding-top: 2vh;
            padding-left: 2vh;
            padding-bottom: 2vh;
        }

        main {
            padding-left: 2vh;
            padding-bottom: 10vh;
        }

        footer {
            text-align: center;
            padding-bottom: 5vh;
        }

        .transparent-button {
            background-color: transparent;
            border-color: transparent;
            cursor: pointer;
        }

        select.select {
            color: #33333c;
            font-size: 1.2em;
            padding: 0.4em;
        }

        .avatar-image {
            width:auto;
            height: 100px;
        }

        .audio-eq-image {
            width:auto;
            height: 100px;
        }

        .logo {
            width: auto;
            height: 100px;
        }

        .h2 {
            font-size: 1.2em;
        }

        h2.section {
            background-color: azure;
            color: #33333c;
            max-width: 50vh;
            padding: 1vh;
        }

        table.with-td-padding td {
            padding-top:20px;
            padding-bottom:30px;
            padding-right:20px;
            padding-left:20px;
        }

        table.with-td-padding td:first-child {
            padding-right:0;
        }

        td.right {
            color: yellowgreen;
            font-size: large;
            padding-left: 10vh;
            padding-bottom: 2vh;
        }

        img.small {
            width:auto;
            height:50px;
        }

        img.big {
            width:auto;
            height:100px;
        }
    </style>
    <script>
        const data = {};

        // TODO: Soportar canciones al azar?
        // https://archive.org/details/streetfighterzero3soundtrackflac/
        // https://archive.org/details/ultra-street-fighter-iv-complete-soundtrack
        data.avatars = {
            alicia: {
                id: "alicia",
                name: "Alicia",
                image: "assets/images/ca-alicia.webp",
                songs: [
                    "https://ninjascl.github.io/astool/assets/music/alicia/01.mp3",
                    "https://ninjascl.github.io/astool/assets/music/alicia/02.mp3",
                    "https://ninjascl.github.io/astool/assets/music/alicia/03.mp3",
                    "https://ninjascl.github.io/astool/assets/music/alicia/04.mp3",
                ]
            },
            maximillian: {
                id: "maximillian",
                name: "Maximillian",
                image: "assets/images/ca-maximillian.webp",
                songs: [
                    "https://ninjascl.github.io/astool/assets/music/maximillian/01.mp3",
                    "https://ninjascl.github.io/astool/assets/music/maximillian/02.mp3",
                    "https://ninjascl.github.io/astool/assets/music/maximillian/03.mp3",
                    "https://ninjascl.github.io/astool/assets/music/maximillian/04.mp3",
                ]
            },
            nila: {
                id: "nila",
                name: "Nila",
                image: "assets/images/ca-nila.webp",
                songs: [
                    "https://ninjascl.github.io/astool/assets/music/nila/01.mp3",
                    "https://ninjascl.github.io/astool/assets/music/nila/02.mp3",
                    "https://ninjascl.github.io/astool/assets/music/nila/03.mp3",
                    "https://ninjascl.github.io/astool/assets/music/nila/04.mp3",
                ]
            },
            levana: {
                id: "levana",
                name: "Levana",
                image: "assets/images/ca-levana.webp",
                songs: [
                    "https://ninjascl.github.io/astool/assets/music/levana/01.mp3",
                    "https://ninjascl.github.io/astool/assets/music/levana/02.mp3",
                    "https://ninjascl.github.io/astool/assets/music/levana/03.mp3",
                    "https://ninjascl.github.io/astool/assets/music/levana/04.mp3",
                    "https://ninjascl.github.io/astool/assets/music/levana/05.mp3",
                ]
            },
            janette: {
                id: "janette",
                name: "Janette",
                image: "assets/images/ca-janette.png",
                songs: [
                    "https://ninjascl.github.io/astool/assets/music/janette/01.mp3",
                    "https://ninjascl.github.io/astool/assets/music/janette/02.mp3",
                    "https://ninjascl.github.io/astool/assets/music/janette/03.mp3",
                    "https://ninjascl.github.io/astool/assets/music/janette/04.mp3",
                ]
            },
            anna: {
                id: "anna",
                name: "Anna",
                image: "assets/images/ca-anna.png",
                songs: [
                    "https://ninjascl.github.io/astool/assets/music/anna/01.mp3",
                    "https://ninjascl.github.io/astool/assets/music/anna/02.mp3",
                    "https://ninjascl.github.io/astool/assets/music/anna/03.mp3",
                    "https://ninjascl.github.io/astool/assets/music/anna/04.mp3",
                ]
            }
        }

        data.sfx = [
            {
                name: "Death 1",
                file: "assets/sfx/12.wav"
            },
            {
                name: "Death 2",
                file: "assets/sfx/13.wav"
            },
            {
                name: "Ready 1",
                file: "assets/sfx/1.wav"
            },
            {
                name: "Ready 2",
                file: "assets/sfx/6.wav"
            },
            {
                name: "KO 1",
                file: "assets/sfx/4.wav"
            },
            {
                name: "KO 2",
                file: "assets/sfx/8.wav"
            }
        ]

        const state = {
            initiative: false
        };

        const music = {
            playing: false,
            audio: null
        };

        const sfx = {
            audio: null
        }

        sfx.play = (sound) => {
            sfx.audio = new Audio(sound);
            sfx.audio.play();
        }

        music.stop = () => {
            if (!music.playing) {
                return null;
            }

            music.audio.pause();
            music.playing = false;
            music.audio = null;
        }

        music.play = (song) => {
            music.stop();
            music.playing = true;

            music.audio = new Audio(song)
            music.audio.loop = true;
            music.audio.play();
        }

        const choose = (avatar_id) => {
            const avatar = data.avatars[avatar_id];

            document.getElementById("music-title").innerText = "🔊 " + avatar.name;

            const cassette = document.getElementById("cassette");
            cassette.innerHTML = `
                <img class="audio-eq-image transparent-button" src="assets/images/cassette.webp" onclick="stop()">
            `;

            const song = avatar.songs[Math.floor(Math.random() * avatar.songs.length)];
            music.play(song);
        }

        const stop = () => {
            
            document.getElementById("music-title").innerText = "🔇 🙉";

            const cassette = document.getElementById("cassette");
            cassette.innerHTML = `
                <img class="audio-eq-image" src="assets/images/cassette.png">
            `;

            music.stop();
        }

        const random = (min = 1, max = 1000) => {
           return Number(Math.floor(Math.random() * (max - min + 1) + min)).toString();
        }

        const set_random = () => {
            document.getElementById("random").innerText = random();
        }

        const set_coin = () => {
            const face = Math.floor(Math.random() * 2) == 0;
            document.getElementById("coin").innerText = face ? "⭕" : "❌";
        }

        const set_initiative = () => {
            state.initiative = !state.initiative;
            let element = state.initiative ? `<img class="big" src="assets/images/red.png">` : `<img class="big" src="assets/images/blue.png">`;
            document.getElementById("initiative").innerHTML = `
                ${element}
            `;
        }

    </script>
</head>
<body>
    <header>
        <a href="https://aiogames.cl" target="_blank">
            <img src="assets/images/logo.webp" class="logo">
        </a>
    </header>
    <main id="content">
            <section id="game-session">
                <h2 class="section">🎲 PARTIDA</h2>
                <table class="with-td-padding">
                    <tbody>
                    <tr>
                        <td>RONDA (ROUND)</td>
                        <td></td>
                        <td>
                            <select class="select">
                                <option>1</option>
                                <option>2</option>
                                <option>3</option>
                                <option>4</option>
                                <option>5</option>
                                <option>6</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>ASALTO (BOUT)</td>
                        <td></td>
                        <td>
                            <select class="select">
                                <option>1</option>
                                <option>2</option>
                                <option>3</option>
                                <option>4</option>
                                <option>5</option>
                                <option>6</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>INICIATIVA</td>
                        <td></td>
                        <td id="initiative" class="transparent-button" onClick="set_initiative()">
                            <img class="big" src="assets/images/red.png">
                        </td>
                    </tr>
                    </tbody>
                </table>
            </section>
            <section id="player1">
                <h2 class="section">1️ PLAYER 1</h2>
                <table class="with-td-padding">
                    <tbody>
                        <tr>
                            <td>PUNTOS VOLUNTAD</td>
                            <td><img class="small" src="assets/images/pv.png"></td>
                            <td>
                                <select class="select">
                                    <option>0</option>
                                    <option>1</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5</option>
                                </select>

                                <select class="select">
                                    <option>0</option>
                                    <option>1</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5</option>
                                    <option>6</option>
                                    <option>7</option>
                                    <option>8</option>
                                    <option>9</option>
                                </select>
                            </td>
                        </tr>
                    <tr>
                        <td>DESGASTE</td>
                        <td><img class="small" src="assets/images/desgaste-blue.png"></td>
                        <td>
                            <select class="select">
                                <option>0</option>
                                <option>1</option>
                                <option>2</option>
                                <option>3</option>
                                <option>4</option>
                                <option>5</option>
                                <option>6</option>
                                <option>7</option>
                                <option>8</option>
                                <option>9</option>
                                <option>10</option>
                                <option>11</option>
                                <option>12</option>
                                <option>13</option>
                                <option>14</option>
                                <option>15</option>
                                <option>16</option>
                                <option>17</option>
                                <option>18</option>
                                <option>19</option>
                                <option>20</option>
                                <option>21</option>
                                <option>X</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>IMPULSO</td>
                        <td><img class="small" src="assets/images/impulso.png"></td>
                        <td>
                            <select class="select">
                                <option>0</option>
                                <option>1</option>
                                <option>2</option>
                                <option>3</option>
                                <option>4</option>
                                <option>5</option>
                                <option>6</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>FATIGA</td>
                        <td><img class="small" src="assets/images/fatiga.png"></td>
                        <td>
                            <select class="select">
                                <option>0</option>
                                <option>1</option>
                                <option>2</option>
                                <option>3</option>
                                <option>4</option>
                                <option>5</option>
                                <option>6</option>
                                <option>7</option>
                                <option>8</option>
                                <option>9</option>
                                <option>10</option>
                                <option>11</option>
                                <option>12</option>
                                <option>13</option>
                                <option>14</option>
                                <option>15</option>
                                <option>16</option>
                                <option>17</option>
                                <option>18</option>
                                <option>19</option>
                                <option>20</option>
                            </select>
                        </td>
                    </tr>

                    <tr>
                        <td>KI</td>
                        <td><img class="small" src="assets/images/ki.png"></td>
                        <td>
                            <select class="select">
                                <option>0</option>
                                <option>1</option>
                                <option>2</option>
                                <option>3</option>
                                <option>4</option>
                                <option>5</option>
                                <option>6</option>
                                <option>7</option>
                                <option>8</option>
                                <option>9</option>
                                <option>10</option>
                                <option>11</option>
                                <option>12</option>
                                <option>13</option>
                                <option>14</option>
                                <option>15</option>
                                <option>16</option>
                                <option>17</option>
                                <option>18</option>
                                <option>19</option>
                                <option>20</option>
                            </select>
                        </td>
                    </tr>

                    <tr>
                        <td>DEFENSA</td>
                        <td><img class="small" src="assets/images/def.png"></td>
                        <td>
                            <select class="select">
                                <option>0</option>
                                <option>1</option>
                                <option>2</option>
                                <option>3</option>
                                <option>4</option>
                                <option>5</option>
                                <option>6</option>
                                <option>7</option>
                                <option>8</option>
                                <option>9</option>
                                <option>10</option>
                                <option>11</option>
                                <option>12</option>
                                <option>13</option>
                                <option>14</option>
                                <option>15</option>
                                <option>16</option>
                                <option>17</option>
                                <option>18</option>
                                <option>19</option>
                                <option>20</option>
                            </select>
                        </td>
                    </tr>
                    
                    </tbody>
                </table>
            </section>
            <section id="player2">
                <h2 class="section">2️ PLAYER 2</h2>
                <table class="with-td-padding">
                    <tbody>
                        <tr>
                            <td>PUNTOS VOLUNTAD</td>
                            <td><img class="small" src="assets/images/pv.png"></td>
                            <td>
                                <select class="select">
                                    <option>0</option>
                                    <option>1</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5</option>
                                </select>

                                <select class="select">
                                    <option>0</option>
                                    <option>1</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5</option>
                                    <option>6</option>
                                    <option>7</option>
                                    <option>8</option>
                                    <option>9</option>
                                </select>
                            </td>
                        </tr>
                    <tr>
                        <td>DESGASTE</td>
                        <td><img class="small" src="assets/images/desgaste-red.png"></td>
                        <td>
                            <select class="select">
                                <option>0</option>
                                <option>1</option>
                                <option>2</option>
                                <option>3</option>
                                <option>4</option>
                                <option>5</option>
                                <option>6</option>
                                <option>7</option>
                                <option>8</option>
                                <option>9</option>
                                <option>10</option>
                                <option>11</option>
                                <option>12</option>
                                <option>13</option>
                                <option>14</option>
                                <option>15</option>
                                <option>16</option>
                                <option>17</option>
                                <option>18</option>
                                <option>19</option>
                                <option>20</option>
                                <option>21</option>
                                <option>X</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>IMPULSO</td>
                        <td><img class="small" src="assets/images/impulso.png"></td>
                        <td>
                            <select class="select">
                                <option>0</option>
                                <option>1</option>
                                <option>2</option>
                                <option>3</option>
                                <option>4</option>
                                <option>5</option>
                                <option>6</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>FATIGA</td>
                        <td><img class="small" src="assets/images/fatiga.png"></td>
                        <td>
                            <select class="select">
                                <option>0</option>
                                <option>1</option>
                                <option>2</option>
                                <option>3</option>
                                <option>4</option>
                                <option>5</option>
                                <option>6</option>
                                <option>7</option>
                                <option>8</option>
                                <option>9</option>
                                <option>10</option>
                                <option>11</option>
                                <option>12</option>
                                <option>13</option>
                                <option>14</option>
                                <option>15</option>
                                <option>16</option>
                                <option>17</option>
                                <option>18</option>
                                <option>19</option>
                                <option>20</option>
                            </select>
                        </td>
                    </tr>

                    <tr>
                        <td>KI</td>
                        <td><img class="small" src="assets/images/ki.png"></td>
                        <td>
                            <select class="select">
                                <option>0</option>
                                <option>1</option>
                                <option>2</option>
                                <option>3</option>
                                <option>4</option>
                                <option>5</option>
                                <option>6</option>
                                <option>7</option>
                                <option>8</option>
                                <option>9</option>
                                <option>10</option>
                                <option>11</option>
                                <option>12</option>
                                <option>13</option>
                                <option>14</option>
                                <option>15</option>
                                <option>16</option>
                                <option>17</option>
                                <option>18</option>
                                <option>19</option>
                                <option>20</option>
                            </select>
                        </td>
                    </tr>

                    <tr>
                        <td>DEFENSA</td>
                        <td><img class="small" src="assets/images/def.png"></td>
                        <td>
                            <select class="select">
                                <option>0</option>
                                <option>1</option>
                                <option>2</option>
                                <option>3</option>
                                <option>4</option>
                                <option>5</option>
                                <option>6</option>
                                <option>7</option>
                                <option>8</option>
                                <option>9</option>
                                <option>10</option>
                                <option>11</option>
                                <option>12</option>
                                <option>13</option>
                                <option>14</option>
                                <option>15</option>
                                <option>16</option>
                                <option>17</option>
                                <option>18</option>
                                <option>19</option>
                                <option>20</option>
                            </select>
                        </td>
                    </tr>
                    
                    </tbody>
                </table>
            </section>
            <section id="music">
                <h2 class="section">🎶 Música</h2>
                <table class="with-td-padding">
                    <tbody>
                        <tr>
                            <td id="music-avatars">
                            </td>
                        </tr>
                        <tr>
                            <td id="music-title" class="h2">🔇 🙉</td>
                            <td></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td id="cassette">
                                <img class="audio-eq-image" src="assets/images/cassette.png">
                            </td>
                            <td></td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>
            </section>
            <section id="sfx">
                <h2 class="section">🔔 SFX</h2>
                <table class="with-td-padding">
                    <tbody>
                        <tr id="sound-effects">
                        </tr>
                    </tbody>
                </table>
            </section>
            <section id="tools">
                <h2 class="section">⚒️ Herramientas</h2>
                <table class="with-td-padding">
                    <tbody>
                    <tr>
                        <td>
                            <button class="purple" onclick="set_random()">Número Aleatorio</button>
                        </td>
                        <td id="random" class="right">-</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>
                            <button class="purple" onclick="set_coin()">Lanzar una moneda</button>
                        </td>
                        <td id="coin" class="right">-</td>
                        <td></td>
                    </tr>
                    </tbody>
                </table>
            </section>
        </div>
    </main>

    <footer>
        <a href="https://github.com/ninjascl/astool">Avatar Spirits Tool</a>. Hecho con ❤️ por <a href="https://ninjas.cl">Ninjas.cl</a>.

    </footer>
    <script type="text/javascript">
        const music_avatars = document.getElementById("music-avatars");

        Object.values(data.avatars).forEach(avatar => {
            music_avatars.innerHTML += `
            <button class="transparent-button" id="${avatar.name}-button" onclick="choose('${avatar.id}')">
                <img class="avatar-image" src="${avatar.image}">
            </button>
            `
        })

        const sound_effects = document.getElementById("sound-effects");
        data.sfx.forEach(sound => {
            sound_effects.innerHTML += `
                <button class="transparent-button purple" onclick="sfx.play('${sound.file}')">
                    ${sound.name}
                </button>
            `
        });

        
    </script>
</body>
</html>